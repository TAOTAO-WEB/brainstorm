<!DOCTYPE html>
<html>
  <head>
    <title>发表主题</title>
    <meta http-equiv="X-UA-Compatible" content="IE=edge"/>
    <meta http-equiv="content-type" content="text/html; charset=utf-8"/>
    <link href="resources/css/axure_rp_page.css" type="text/css" rel="stylesheet"/>
    <link href="data/styles.css" type="text/css" rel="stylesheet"/>
    <link href="files/发表主题/styles.css" type="text/css" rel="stylesheet"/>
    <script src="resources/scripts/jquery-3.2.1.min.js"></script>
  </head>
  <body>
    <div id="publishtopic" class="">

      <!-- description (组合) -->
      <div id="u61" class="ax_default" data-label="description" data-left="106" data-top="296" data-width="859" data-height="487">

        <!-- Unnamed (矩形) -->
        <div id="u62" class="ax_default box_1">
          <div id="u62_div" class=""></div>
          <div id="u62_text" class="text " style="display:none; visibility: hidden">
            <p></p>
          </div>
        </div>

        <!-- userimg (图片 ) -->
        <div id="u63" class="ax_default image" data-label="userimg">
          <img id="u63_img" class="img " src="images/发表主题/userimg_u63.svg"/>
          <div id="u63_text" class="text " style="display:none; visibility: hidden">
            <p></p>
          </div>
        </div>

        <!-- 主题输入框context (文本框) -->
        <div id="u64" class="ax_default text_field" data-label="主题输入框context">
          <div id="u64_div" class=""></div>
          <input id="u64_input" type="text" value="" class="u64_input" name='context' v-model='context'/>
        </div>

        <!-- 发言框 (矩形) -->
        <div id="u65" class="ax_default box_1" data-label="发言框">
          <img id="u65_img" class="img " src="images/发表主题/发言框_u65.svg"/>
          <div id="u65_text" class="text " style="display:none; visibility: hidden">
            <p></p>
          </div>
        </div>

        <!-- 插入 (组合) -->
        <div id="u66" class="ax_default" data-label="插入" data-left="178" data-top="471" data-width="693" data-height="19">

          <!-- Unnamed (形状) -->
          <div id="u67" class="ax_default icon">
            <img id="u67_img" class="img " src="images/发表主题/u67.svg"/>
            <div id="u67_text" class="text " style="display:none; visibility: hidden">
              <p></p>
            </div>
          </div>

          <!-- Unnamed (形状) -->
          <div id="u68" class="ax_default icon">
            <img id="u68_img" class="img " src="images/发表主题/u67.svg"/>
            <div id="u68_text" class="text " style="display:none; visibility: hidden">
              <p></p>
            </div>
          </div>

          <!-- Unnamed (形状) -->
          <div id="u69" class="ax_default icon">
            <img id="u69_img" class="img " src="images/发表主题/u67.svg"/>
            <div id="u69_text" class="text " style="display:none; visibility: hidden">
              <p></p>
            </div>
          </div>

          <!-- Unnamed (形状) -->
          <div id="u70" class="ax_default icon">
            <img id="u70_img" class="img " src="images/发表主题/u67.svg"/>
            <div id="u70_text" class="text " style="display:none; visibility: hidden">
              <p></p>
            </div>
          </div>

          <!-- Unnamed (形状) -->
          <div id="u71" class="ax_default icon">
            <img id="u71_img" class="img " src="images/发表主题/u67.svg"/>
            <div id="u71_text" class="text " style="display:none; visibility: hidden">
              <p></p>
            </div>
          </div>

          <!-- Unnamed (形状) -->
          <div id="u72" class="ax_default icon">
            <img id="u72_img" class="img " src="images/发表主题/u67.svg"/>
            <div id="u72_text" class="text " style="display:none; visibility: hidden">
              <p></p>
            </div>
          </div>
        </div>

        <!-- 问题描述 (文本域) -->
        <div id="u73" class="ax_default text_area" data-label="问题描述">
          <div id="u73_div" class=""></div>
          <textarea id="u73_input" class="u73_input" name='description' v-model='description'></textarea>
        </div>

        <!-- add (形状) -->
        <div id="u74" class="ax_default icon" data-label="add">
          <img id="u74_img" class="img " src="images/发表主题/add_u74.svg"/>
          <div id="u74_text" class="text " style="display:none; visibility: hidden">
            <p></p>
          </div>
        </div>

        <!-- Unnamed (矩形) -->
        <div id="u75" class="ax_default primary_button">
          <button @click="handle">Submit</button>
        </div>

        <!-- tag (文本框) -->
        <div id="u76" class="ax_default text_field" data-label="tag">
          <div id="u76_div" class=""></div>
          <input id="u76_input" type="text" value="" class="u76_input" name='tag' v-model='tag'/>
        </div>
      </div>
    </div>

    <script type="text/javascript" src="js/vue.js"></script>
    <script type="text/javascript" src="js/axios.js"></script>
    <script type="text/javascript">
      axios.defaults.baseURL = 'http://localhost:8080/';
      axios.interceptors.response.use(function(res){
        return res.data;
      }, function(error){
        console.log(error)
      });
      var vm=new Vue({
        el:'#publishtopic',
        data:{
          token:'',
          context:'',
          description:'',
          tag:'',
        },
        methods:{
          queryData:async function(){
            var ret = await axios.post("topic/publishtopic",{
              token:this.token,
            });
            if(ret.status!=200){
              console.log('error');
            }
          },
          handle:async function(){
            var ret = await axios.post("topic/publishtopic",{
              context:this.context,
              description:this.description,
              tag:this.tag,
            });
            console.log("发布主题帖成功");
          },
        },
        mounted:function(){
          this.queryData();
        }
      })
    </script>
  </body>
</html>
